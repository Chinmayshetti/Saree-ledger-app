<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Saree Shop Cash Management</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial, sans-serif;
    background:#f2f4f7;
    margin:0;
    padding:15px;
}
h1 { text-align:center; }

.container {
    max-width:1200px;
    margin:auto;
}

.card {
    background:white;
    padding:20px;
    margin-bottom:20px;
    border-radius:12px;
    box-shadow:0 4px 10px rgba(0,0,0,0.08);
}

input, button {
    width:100%;
    padding:12px;
    margin:6px 0;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:16px;
}

button {
    background:#1f3c88;
    color:white;
    border:none;
    font-weight:bold;
    cursor:pointer;
}

button:hover {
    background:#162e66;
}

.summary-grid {
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap:10px;
}

.summary-box {
    background:#eef2f7;
    padding:15px;
    border-radius:10px;
    text-align:center;
}

table {
    width:100%;
    border-collapse:collapse;
}

th, td {
    border:1px solid #ddd;
    padding:8px;
    text-align:center;
    font-size:14px;
}

th {
    background:#f0f0f0;
}

.delete-btn {
    background:#c0392b;
}

.positive { color:green; font-weight:bold; }
.negative { color:red; font-weight:bold; }

@media(max-width:768px){
    table { font-size:12px; }
}
</style>
</head>

<body>

<h1>Saree Shop Daily Cash System</h1>

<div class="container">

<div class="card">
<h2>Daily Entry</h2>

<input type="date" id="date">
<input type="number" id="cash" placeholder="Cash Sales">
<input type="number" id="phonepe" placeholder="PhonePe Sales">
<input type="number" id="expenses" placeholder="Other Expenses">
<input type="number" id="partyPayment" placeholder="Cash Paid To Party">
<input type="number" id="closingCash" placeholder="Closing Cash (Physical)">

<button onclick="saveEntry()">Save Entry</button>

</div>

<div class="card">
<h2>Dashboard Summary</h2>

<div class="summary-grid">

<div class="summary-box">
<h4>Total Sales</h4>
<p id="totalSales">Rs. 0</p>
</div>

<div class="summary-box">
<h4>Total Cash</h4>
<p id="totalCash">Rs. 0</p>
</div>

<div class="summary-box">
<h4>Total PhonePe</h4>
<p id="totalPhonePe">Rs. 0</p>
</div>

<div class="summary-box">
<h4>Total Expenses</h4>
<p id="totalExpenses">Rs. 0</p>
</div>

<div class="summary-box">
<h4>Total Party Payment</h4>
<p id="totalParty">Rs. 0</p>
</div>

<div class="summary-box">
<h4>Total Expected Cash</h4>
<p id="totalExpected">Rs. 0</p>
</div>

<div class="summary-box">
<h4>Total Difference</h4>
<p id="totalDiff">Rs. 0</p>
</div>

</div>
</div>

<div class="card">
<h2>All Records</h2>

<table>
<thead>
<tr>
<th>Date</th>
<th>Cash</th>
<th>PhonePe</th>
<th>Total Sales</th>
<th>Expenses</th>
<th>Party Paid</th>
<th>Expected</th>
<th>Closing</th>
<th>Difference</th>
<th>Delete</th>
</tr>
</thead>
<tbody id="recordTable"></tbody>
</table>

</div>

</div>

<script>

const STORAGE_KEY = "SAREE_CASH_SYSTEM_V4";
let records = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

function format(num){
    return Number(num).toLocaleString("en-IN");
}

function saveToStorage(){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(records));
}

function saveEntry(){

    const date = document.getElementById("date").value;
    const cash = parseFloat(document.getElementById("cash").value) || 0;
    const phonepe = parseFloat(document.getElementById("phonepe").value) || 0;
    const expenses = parseFloat(document.getElementById("expenses").value) || 0;
    const partyPayment = parseFloat(document.getElementById("partyPayment").value) || 0;
    const closingCash = parseFloat(document.getElementById("closingCash").value) || 0;

    if(!date){
        alert("Please select date");
        return;
    }

    const totalSales = cash + phonepe;
    const expectedCash = cash - expenses - partyPayment;
    const difference = closingCash - expectedCash;

    records.push({
        date,
        cash,
        phonepe,
        totalSales,
        expenses,
        partyPayment,
        expectedCash,
        closingCash,
        difference
    });

    saveToStorage();
    renderTable();
    renderSummary();

    document.querySelectorAll("input").forEach(i => i.value = "");
}

function deleteEntry(index){
    if(confirm("Delete this entry?")){
        records.splice(index,1);
        saveToStorage();
        renderTable();
        renderSummary();
    }
}

function renderTable(){

    const table = document.getElementById("recordTable");
    table.innerHTML = "";

    records.forEach((r,index)=>{

        const diffClass = r.difference >= 0 ? "positive" : "negative";

        table.innerHTML += `
        <tr>
        <td>${r.date}</td>
        <td>Rs. ${format(r.cash)}</td>
        <td>Rs. ${format(r.phonepe)}</td>
        <td>Rs. ${format(r.totalSales)}</td>
        <td>Rs. ${format(r.expenses)}</td>
        <td>Rs. ${format(r.partyPayment)}</td>
        <td>Rs. ${format(r.expectedCash)}</td>
        <td>Rs. ${format(r.closingCash)}</td>
        <td class="${diffClass}">Rs. ${format(r.difference)}</td>
        <td><button class="delete-btn" onclick="deleteEntry(${index})">Delete</button></td>
        </tr>
        `;
    });
}

function renderSummary(){

    let totalSales=0,
        totalCash=0,
        totalPhonePe=0,
        totalExpenses=0,
        totalParty=0,
        totalExpected=0,
        totalDiff=0;

    records.forEach(r=>{
        totalSales+=r.totalSales;
        totalCash+=r.cash;
        totalPhonePe+=r.phonepe;
        totalExpenses+=r.expenses;
        totalParty+=r.partyPayment;
        totalExpected+=r.expectedCash;
        totalDiff+=r.difference;
    });

    document.getElementById("totalSales").innerText = "Rs. " + format(totalSales);
    document.getElementById("totalCash").innerText = "Rs. " + format(totalCash);
    document.getElementById("totalPhonePe").innerText = "Rs. " + format(totalPhonePe);
    document.getElementById("totalExpenses").innerText = "Rs. " + format(totalExpenses);
    document.getElementById("totalParty").innerText = "Rs. " + format(totalParty);
    document.getElementById("totalExpected").innerText = "Rs. " + format(totalExpected);
    document.getElementById("totalDiff").innerText = "Rs. " + format(totalDiff);
}

renderTable();
renderSummary();

</script>

</body>
</html>
